# 프로젝트 명

클라우드 서버를 이용한 가정용 안전 서비스(with Thinger.io, RaspberryPI)

## 프로젝트 개요

•	한 학기동안 ‘IOT 네트워크 프로그래밍’이라는 강의를 수강하며 라즈베리 파이를 실습실에서 교보재로 이용할 수 있게 되면서 당시 가정 내 안전 사고로 목숨을 잃는 사람들의 소식을 접한 후 ‘클라우드 상에서 각 가정 내 센서로부터 위험요소를 감지하고 안전 대책을 선제적으로 조치하고 알릴 수 있다면 어떨까?’ 라는 아이디어에서 출발해 시작한 프로젝트입니다.


•	사물 인터넷 클라우드 기반 동작 제어 플랫폼인 thinger.io를 이용하였고 라즈베리파이 기판 위의 센서가 수집하는 정보로 클라우드 서버에서 모터나 전원을 조작할 수 있다면 가정 생활에서 이용되는 센서에 추후 충분히 적용 가능하다고 판단했습니다.


•	서비스를 위해 구현한 기능으로는 ‘가스 대책 기능’, ‘화재 대책 기능’, ‘동작 감지 전등 기능’, ‘인덕션 미사용 감지기능’ 등이 있습니다.


•	각각의 구현을 위해 이용한 센서와 액츄에이터는 pir(적외선)센서, LED(전원등), 가스 감지 센서, 가변저항 스위치, 부저, flame센서, step모터, ultrasonic(초음파)센서 등이 있습니다.


•	또한 교수님의 지도 하에 결과 보고서와 간단한 개발 제안서를 작성하였고 자체적인 평가 점검목록을 만들어 서비스의 품질을 평가하는 기준도 제시하였습니다.

## 개발자

정영희 : <https://github.com/jkhyjkhy>
조원석 : <https://github.com/sorrk>

## 개발기간

2022/12/07 ~ 12/08 : 개발 주제 및 내용 아이디어 회의


2022/12/09 : 개발 제안서 작성 및 관련 내용 스터디


2022/12/10~12


12/10 : 현관문 동작감지 기능 개발


12/11 : 가스대책, 화재대책 기능 개발


12/12 : 인덕션 실사용 감지 기능 개발 및 기존 기능 upgrade


총 개발기간 : 6일

----------
# 기능 설명

## 가스 대책 기능
### 사용 센서 및 액츄에이터
1. 가스감지 센서
2. 가변저항 스위치
3. 부저
### 입력 및 출력 정보
가스 센서가 감지한 가스 값


클라우드 서버로 전달 된 가스 수치


클라우드 서버로 전달 된 현재 가변저항 값


불리언 값으로 전달되는 부저 값

### 동작 내용
집안 내에 가스가 감지되면 가스밸브가 잠길때까지 부저가 멈추지 않고 울림
### 동작 과정
가스가 감지되면(1500이상의 값) 클라우드 상에서 명령을 보내 부저가 울리고 클라우드 서버가 1초 단위로 사용자가 가스밸브(가변저항)를 잠구었는지 확인한다.


가변저항 값이 100이 넘지 않는다면 부저가 꺼지지 않으며 100이 넘는다면 클라우드에서 부저를 종료하는 명령을 전송한다. 
### 자체 평가기준 
가스가 감지된 이후 가변저항이 100 이하일때 부저가 계속 울리는지




가스가 감지된 이후 가변저항이 100 이상일때 부저가 종료되는지

### 사진
<img width="418" alt="image" src="https://github.com/jkhyjkhy/IOT_Project/assets/69373688/07c8bbc4-6cb6-46f8-9048-71eee6d7b2ff">
<img width="416" alt="image" src="https://github.com/jkhyjkhy/IOT_Project/assets/69373688/96006727-8447-4732-9276-7b4b3747aa1d">


1. 대시보드(좌)에서 gas값이 1500 미만일때는 부저가 울리지 않는다.(일상 생활에서 가스 감지기가 상시 1400을 초과 하지 않음을 확인)
2. 대시보드(우)에서는 gas값이 1500 이상이므로 vr값이 100 이상이 되지 않으면 부저의 울림이 멈추지 않는다

---
## 인덕션 사용 감지기능
### 사용 센서 및 액츄에이터
1. 초음파(ultrasonic) 센서
2. LED

### 입력 및 출력 정보
초음파 센서가 감지한 거리 값


클라우드 서버로 5초 간격으로 전달되는 거리 수치


LED BLUE의 켜짐과 꺼짐을 담당하는 불리언 값
### 동작 내용
인덕션의 전원을 킨 상태에서 실시간으로 거리를 감지해 일정 거리 이상이 지속되면 인덕션을 현재 사용중이지 않다고 판단하며 전원을 종료함
### 동작 과정
인덕션의 전원이 켜지면(푸른 LED, 이하 LED) 5초간격으로 ultrasonic 센서가 거리를 감지
1m 미만의 거리가 감지되는 상태에선 전원상태(LED)가 계속 유지되고 1m 이상의 거리가 감지되면 전원상태(LED)가 종료된다.
5초 간격으로 물체를 감지하여 클라우드 대쉬보드 상에서 물체가 감지되지 않으면 종료 신호를 보내 전원이 꺼지게 됨
### 자체 평가기준 
인덕션을 키라는 명령을 받으면 파란 LED가 켜지고 초음파 센서에 1미터 미만의 거리가 감지되면 전원이 계속 유지되는가?

초음파 센서에 1m 이상의 거리가 5초를 초과하여 감지되면 전원(LED)이 꺼지는가?
### 사진
![image](https://github.com/jkhyjkhy/IOT_Project/assets/69373688/440c037c-984d-4ac1-981c-ae3e89802209)

![image](https://github.com/jkhyjkhy/IOT_Project/assets/69373688/e3bf7a5d-14b0-4dec-b275-01603cbfb6df)

<img width="215" alt="image" src="https://github.com/jkhyjkhy/IOT_Project/assets/69373688/59fef72c-7e2e-451d-82a8-19eeefc86cf1">

<img width="214" alt="image" src="https://github.com/jkhyjkhy/IOT_Project/assets/69373688/91e01d2e-3a62-4fcc-aeaa-b94d533f7b08">

---
## 동작 감지 전등 기능
### 사용 센서 및 액츄에이터
1. PIR 센서 : 적외선 센서
2. LED
### 입력 및 출력 정보
PIR 센서가 감지한 거리 값


클라우드서버로 전달된 거리값의 변화율


LED RED
### 동작 내용
PIR 센서에 동작이 감지되면 전등(LED)이 켜지고 5초후에 꺼진다.


### 동작 과정
PIR 센서가 감지하는 거리량을 클라우드 서버에서 pson 객체로 전달 받으면 

서버의 대쉬보드는 이전 거리량과의 변화율을 계산하여 대쉬보드에 '타임시리즈 차트'로 표시하게 되고 클라우드 서버로 전달된 거리값의 변화율이 0이 아니라면 그 지역을 지나는 대상이 있다고 판단하여 LED가 켜지게 되고 5초간 유지된다
### 자체 평가기준 
동작이 감지되면 5초간 LED_RED가 점등되고 유지 된 후 종료되는가?


해당 과정이 단발성으로 끝나지 않고 연속적으로 작동 하는가?
### 사진
![image](https://github.com/jkhyjkhy/IOT_Project/assets/69373688/01fbef17-ee28-43f1-b5e3-1006ffe5af89)
<img width="477" alt="image" src="https://github.com/jkhyjkhy/IOT_Project/assets/69373688/58eaa14b-df82-4aa2-bb2d-663b9f3cdbf5">

동작이 감지되면(두번째 사진) 대쉬보드상에 변화율이 감지되고
클라우드 상에서 변화율이 감지되면 LED 등이 켜진다. 

---
## 화재 대책 기능
### 사용 센서 및 액츄에이터
1. flame 센서 : 불꽃 감지 센서
2. step 모터
### 입력 및 출력 정보
Flame 센서가 감지한 광전값


클라우드상에서 대쉬보드에 전달되는 감지값


스텝모터의 시계방향 회전
### 동작 내용
집안 내에 화재가 감지되었을 때 문이 자동으로 잠금을 풀고 열림 


### 동작 과정
Flame 센서에 포착되어 클라우드로 보내진 값이 90 이상이면 화재가 발생했다고 판단하여 스텝 모터가 시계방향으로 자동으로 180도 회전하게 됨
### 자체 평가기준 
Flame 센서가90 이상일때 실제로 먼저 스텝 모터가 동작하는지 (현관문 잠금 장치의 동작)


상기된 바와 같이 180도 시계방향으로 회전하는지 
### 사진
<img width="300" alt="image" src="https://github.com/jkhyjkhy/IOT_Project/assets/69373688/c4db28ad-3a39-43a7-b4ef-8d27794ea5f5">
<img width="300" alt="image" src="https://github.com/jkhyjkhy/IOT_Project/assets/69373688/e4b15713-7611-459a-abf8-5ce625979fce">
<img width="300" alt="image" src="https://github.com/jkhyjkhy/IOT_Project/assets/69373688/9bfa43be-31fe-48c3-8e19-4fea1d5e144c">






